<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–Ω–∞–ª–∏–∑ –º–µ–Ω—Å—Ç—Ä—É–∞–ª—å–Ω—ã—Ö —Ü–∏–∫–ª–æ–≤</title>
    <link rel="stylesheet" href="style.css" />
    <script src="script.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@1.0.2"></script>
    <script src="https://cdn.jsdelivr.net/npm/suncalc@1.9.0/suncalc.min.js"></script>
</head>
<body>
    <div class="main-container">
        <button class="switch-btn" onclick="openMoonModal()" style="display: block;"></button>

        <h1>–ê–Ω–∞–ª–∏–∑ –º–µ–Ω—Å—Ç—Ä—É–∞–ª—å–Ω—ã—Ö —Ü–∏–∫–ª–æ–≤</h1>

        <div class="chart-switcher">
            <button class="switch-btn active" id="show-cycle-chart">–ì—Ä–∞—Ñ–∏–∫ —Ü–∏–∫–ª–æ–≤</button>
            <button class="switch-btn" id="show-correlation-chart">–ê–Ω–∞–ª–∏–∑ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏</button>
        </div>

        <div class="dates">
            <span>–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É:</span>
            <input type="date" class="date-input" id="main-date">
        </div>
        
        <div class="main-content">
            <div class="charts-section">
                <div class="chart-wrapper" id="cycle-chart-wrapper">
                    <div class="controls">
                        <h3>–í—ã–±–µ—Ä–∏—Ç–µ —É—á–∞—Å—Ç–Ω–∏—Ü –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:</h3>
                        <div class="checkbox-group" id="checkboxes"></div>
                        <div class="button-group">
                            <button onclick="selectAllCycle()">–í—ã–±—Ä–∞—Ç—å –≤—Å–µ—Ö</button>
                            <button onclick="deselectAllCycle()">–°–Ω—è—Ç—å –≤—ã–±–æ—Ä</button>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="cycle-chart"></canvas>
                        <div id="overlay"></div>
                    </div>
                </div>

                <div class="chart-wrapper correlation" id="correlation-chart-wrapper" style="display: none;">
                    <div class="controls">
                        <h3>–í—ã–±–µ—Ä–∏—Ç–µ —É—á–∞—Å—Ç–Ω–∏—Ü –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:</h3>
                        <div class="checkbox-group" id="participants-checkbox"></div>
                        <button id="select-all">–í—ã–±—Ä–∞—Ç—å –≤—Å–µ—Ö</button>
                        <button id="deselect-all">–°–Ω—è—Ç—å –≤—ã–±–æ—Ä</button>
                    </div>
                    <div class="chart-container">
                        <canvas id="correlation-chart"></canvas>
                    </div>
                    <div class="button-group" style="justify-content: center">
                        <button onclick="openAnalysisModal()" class="switch-btn"> –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–π –∞–Ω–∞–ª–∏–∑</button>
                    </div>
                </div>



                <div class="modal" id="moonModal">
                    <div class="modal-content">
                        <button class="close-btn" onclick="closeMoonModal()">√ó</button>
                        <div class="date-top-right" id="today-date"></div>
                        <h1 style="color: #d63384;">üåú –õ—É–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏</h1>
    
                        <div class="date-input-container">
                            <input type="date" class="date-input" id="modal-date">
                        </div>
    

                        <div class="section">
                            <div class="section-title">–ú–µ–Ω—Å—Ç—Ä—É–∞—Ü–∏—è</div>
                            <ul id="menstruation-list"></ul>
                            <div class="empty-state" id="menstruation-empty">–ù–∏ —É –∫–æ–≥–æ –Ω–µ—Ç –º–µ–Ω—Å—Ç—Ä—É–∞—Ü–∏–∏ –≤ —ç—Ç–æ—Ç –¥–µ–Ω—å</div>
                        </div>

                        <div class="section">
                            <div class="section-title">–û–≤—É–ª—è—Ü–∏—è</div>
                            <ul id="ovulation-list"></ul>
                            <div class="empty-state" id="ovulation-empty">–ù–∏ —É –∫–æ–≥–æ –Ω–µ—Ç –æ–≤—É–ª—è—Ü–∏–∏ –≤ —ç—Ç–æ—Ç –¥–µ–Ω—å</div>
                        </div>

                        <div class="moon-phase" id="moon-phase">
                            <div>–§–∞–∑–∞ –ª—É–Ω—ã: <span id="moon-phase-text">...</span></div>
                        </div>
                    </div>
                </div>

            </div>
            <div class="modal" id="analysisModal">
                <div class="modal-content" style="max-width: 800px; height: 80vh; display: flex; flex-direction: column;">
                    <button class="close-btn" onclick="closeAnalysisModal()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M18 6L6 18M6 6L18 18" stroke="#FCB5B7" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </button>
                    <button id="toggleExpandBtn" class="expand-btn">
                        <!-- –ò–∫–æ–Ω–∫–∞ –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è -->
                        <svg class="expand-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M4 8V4M4 4H8M4 4L9 9M20 8V4M20 4H16M20 4L15 9M4 16V20M4 20H8M4 20L9 15M20 16V20M20 20H16M20 20L15 15" stroke="#FCB5B7" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <!-- –ò–∫–æ–Ω–∫–∞ –¥–ª—è —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è -->
                        <svg class="collapse-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="display: none;">
                            <path d="M20.8571 9.75C21.2714 9.75 21.6071 9.41421 21.6071 9C21.6071 8.58579 21.2714 8.25 20.8571 8.25H16.8107L22.5303 2.53033C22.8232 2.23744 22.8232 1.76256 22.5303 1.46967C22.2374 1.17678 21.7626 1.17678 21.4697 1.46967L15.75 7.18934V3.14286C15.75 2.72864 15.4142 2.39286 15 2.39286C14.5858 2.39286 14.25 2.72864 14.25 3.14286V9C14.25 9.41421 14.5858 9.75 15 9.75H20.8571Z" stroke="#FCB5B7" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </button>
                    <h2 style="color: #d63384; margin-bottom: 20px;">–î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏</h2>
                    <div class="conclusion" id="conclusion"></div>
                </div>
            </div>

</body>

</html>